<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="theme-color" content="#1e74f1"/>
  <title>Admin Â· Whylee</title>
  <link rel="manifest" href="/site.webmanifest?v=6007"/>
  <link rel="icon" href="/media/icons/favicon.svg" type="image/svg+xml"/>
  <link rel="stylesheet" href="/style.css?v=6007"/>
</head>
<body>
  <header class="app-header">
    <div class="brand"><img class="logo" src="/media/icons/whylee-fox.svg" alt="" width="28" height="28"/><h1>Whylee Admin</h1></div>
  </header>
  <main class="app-shell">
    <section class="card">
      <h2>Local Admin</h2>
      <div class="list">
        <button id="btn-export" class="secondary">Export Tasks (JSON)</button>
        <button id="btn-import" class="secondary">Import Tasks (JSON)</button>
        <input id="file-import" type="file" accept="application/json" hidden />
      </div>
      <pre id="admin-log" class="muted" style="white-space:pre-wrap"></pre>
    </section>
  </main>
  <footer class="app-footer">
    <nav class="tabs">
      <a href="/#/home">Home</a>
      <a href="/#/tasks">Tasks</a>
      <a class="active" href="/admin.html">Admin</a>
    </nav>
  </footer>

  <script>
    const key = 'whylee:tasks';
    const log = (m)=> document.getElementById('admin-log').textContent = m;
    document.getElementById('btn-export')?.addEventListener('click', ()=>{
      const data = localStorage.getItem(key) || '[]';
      const blob = new Blob([data], {type:'application/json'});
      const a = Object.assign(document.createElement('a'), {href:URL.createObjectURL(blob), download:'whylee-tasks.json'});
      a.click(); URL.revokeObjectURL(a.href);
      log('Exported tasks.');
    });
    document.getElementById('btn-import')?.addEventListener('click', ()=> document.getElementById('file-import').click());
    document.getElementById('file-import')?.addEventListener('change', async (e)=>{
      const f = e.target.files[0]; if(!f) return;
      const text = await f.text();
      try{ JSON.parse(text); localStorage.setItem(key, text); log('Imported tasks.'); }
      catch{ log('Invalid JSON.'); }
    });
  </script>

  <script src="/app.js?v=6007" defer></script>
  <script src="/shell.js?v=6007" defer></script>
</body>
</html>
