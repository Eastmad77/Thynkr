<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="theme-color" content="#0a2a43"/>
  <title>Whylee Pro</title>
  <link rel="manifest" href="/site.webmanifest?v=7000"/>
  <link rel="icon" href="/media/icons/favicon.svg" type="image/svg+xml"/>
  <link rel="stylesheet" href="/css/style.css?v=7000"/>
</head>
<body class="theme-dark">
  <header class="app-header">
    <a class="brand" href="/"><img src="/media/icons/app-icon.svg" alt="" class="brand-icon"/>Whylee</a>
    <nav class="top-nav">
      <a href="/leaderboard.html" class="top-link">Leaderboard</a>
      <a href="/achievements.html" class="top-link">Badges</a>
    </nav>
  </header>

  <main class="app-shell">
    <section class="card">
      <h1>Upgrade to Pro</h1>
      <ul class="tick">
        <li>Animated posters & ambient audio</li>
        <li>Priority offline support</li>
        <li>Leaderboards & Pro avatars</li>
        <li>Golden Run events & reflections+</li>
      </ul>
      <div class="row gap">
        <button id="btnStartTrial" class="btn primary">Start 3-Day Trial</button>
        <span id="proStatus" class="muted"></span>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    <nav class="tabs">
      <a href="/#/home">Home</a>
      <a href="/pro.html" class="active">Pro</a>
      <a href="/leaderboard.html">Leaderboard</a>
    </nav>
  </footer>

  <script>
    document.getElementById('btnStartTrial')?.addEventListener('click', async ()=>{
      try{
        // Stripe Netlify Function (implemented in /api/stripe/createCheckoutSession.js)
        const res = await fetch('/api/stripe/createCheckoutSession', { method:'POST' });
        const { url, error } = await res.json();
        if (url) location.href = url;
        else document.getElementById('proStatus').textContent = error || 'Checkout unavailable.';
      }catch(err){
        document.getElementById('proStatus').textContent = 'Network error.';
        console.error(err);
      }
    });
  </script>
  <script src="/js/app.js?v=7000" defer></script>
</body>
</html>
