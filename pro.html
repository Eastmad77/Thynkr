<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="theme-color" content="#1e74f1"/>
  <title>Whylee Pro</title>
  <link rel="manifest" href="/site.webmanifest?v=6007"/>
  <link rel="icon" href="/media/icons/favicon.svg" type="image/svg+xml"/>
  <link rel="stylesheet" href="/style.css?v=6007"/>
</head>
<body>
  <header class="app-header">
    <div class="brand"><img class="logo" src="/media/icons/whylee-fox.svg" alt="" width="28" height="28"/><h1>Whylee Pro</h1></div>
  </header>
  <main class="app-shell">
    <section class="card">
      <h2>Upgrade to Pro</h2>
      <ul>
        <li>Animated splash & premium posters</li>
        <li>Priority offline updates</li>
        <li>Early access features</li>
      </ul>
      <div class="list">
        <button id="btn-pro-toggle" class="primary">Toggle Pro (local)</button>
        <button id="btn-pro-checkout" class="secondary">Start Pro Trial (Checkout)</button>
        <div id="pro-status" class="muted"></div>
      </div>
    </section>
  </main>
  <footer class="app-footer">
    <nav class="tabs">
      <a href="/#/home">Home</a>
      <a href="/#/tasks">Tasks</a>
      <a class="active" href="/pro.html">Pro</a>
    </nav>
  </footer>

  <script src="/pro.js?v=6004" defer></script>
  <script>
    document.addEventListener('DOMContentLoaded', ()=>{
      const btnToggle = document.getElementById('btn-pro-toggle');
      const btnCheckout = document.getElementById('btn-pro-checkout');
      const status = document.getElementById('pro-status');

      function paint(){ status.textContent = window.WhyleePro?.isPro() ? 'Pro enabled locally.' : 'Pro disabled.'; }
      btnToggle?.addEventListener('click', ()=> { window.WhyleePro?.setPro(!window.WhyleePro?.isPro()); paint(); });
      btnCheckout?.addEventListener('click', async ()=>{
        try{
          const res = await fetch('/.netlify/functions/create-checkout-session', { method:'POST' });
          const { url, error } = await res.json();
          if (url) location.href = url; else status.textContent = error || 'Checkout temporarily unavailable.';
        }catch(err){ status.textContent = 'Checkout temporarily unavailable.'; }
      });
      paint();
    });
  </script>

  <script src="/app.js?v=6007" defer></script>
  <script src="/shell.js?v=6007" defer></script>
</body>
</html>
